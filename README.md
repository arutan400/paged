# 🏇 ウマ娘 URAシナリオ自動育成スクリプト（Airtest + Python）

このスクリプトは、ウマ娘の育成モード「URAファイナルズ」を **スピード練習のみで完走することを目的とした完全自動化ツール**です。  
Airtest と Python を使用し、Android エミュレータ上で育成のすべての操作を自動で実行します。

---

## ✅ 主な機能

- URA育成を開始から完了まで全自動で操作
- トレーニングは毎ターン「スピード練習」のみを選択
- 体力が青ゲージ（低下状態）のときは「お休み」を実行
- イベント発生時は常に指定の選択肢画像を自動でタップ
- スキルイベント、サポートイベントに対応
- 故障イベントでは「治療する」を選択して継続
- レース出走から結果スキップまでを自動処理
- 回復アイテムも自動で使用可能

---

## 🛠 必要環境

- Python 3.x  
- Airtest（インストール: `pip install airtest`）  
- Airtest IDE（https://airtest.netease.com/）  
- Androidエミュレータ（例：BlueStacks / Nox）  
- 画像テンプレートを保存する `images/` フォルダ

---

## 🖼 使用する画像テンプレート一覧

下記の画像を Airtest IDE を使ってキャプチャし、`images/` フォルダに保存してください。

| ファイル名                            | 内容                                |
|--------------------------------------|-------------------------------------|
| `ura_start.png`                      | 育成開始ボタン                      |
| `skip.png`, `next.png`               | ムービー／イベントのスキップ       |
| `event_option.png`                   | 通常イベントで選択したい項目       |
| `skill_option.png`, `confirm_skill.png` | スキルイベント選択と確認ボタン |
| `support_event.png`                  | サポートイベントの選択肢           |
| `injury_event.png`, `treat_injury.png` | 故障発生時の画面と「治療する」   |
| `stamina_blue.png`, `rest.png`       | 体力が青ゲージ時のお休み処理       |
| `train_speed.png`, `confirm.png`     | スピード練習画面と決定ボタン       |
| `item_recovery.png`, `close_item.png`| 回復アイテムと閉じるボタン         |
| `info_ok.png`                        | レース情報確認の「OK」ボタン       |
| `race_start.png`                     | レース開始ボタン                   |
| `ura_finish.png`                     | URA育成完了の確認画像              |

---

## 🚀 スクリプトの動作概要

このスクリプトは以下の流れで処理を進めます：

1. Airtest で Android エミュレータに接続
2. `ura_start.png` を使って育成を開始
3. 毎ターン、スキップ操作で演出を飛ばしつつ処理を進行
4. イベントが発生した場合は `event_option.png` を選択
5. スキルイベントやサポートイベント発生時は対応画像をタップ
6. 体力ゲージが青い場合は `rest.png` を押して休息
7. `train_speed.png` を使ってスピード練習を選択、`confirm.png` で決定
8. レース出走タイミングでは `race_start.png` → スキップ処理 → `info_ok.png` を処理
9. 故障イベント（`injury_event.png`）が出たら `treat_injury.png` を押して治療
10. アイテム（`item_recovery.png`）がある場合は使用し、`close_item.png` で閉じる
11. `ura_finish.png` が表示されたらシナリオ完了として終了

これらの処理を `main()` 関数内でループし、URA完走まで自動で進行します。

---

## 📌 実行方法

1. Android エミュレータ上でウマ娘を起動しておく
2. Airtest IDE でこのスクリプトを開く
3. `images/` フォルダに上記のテンプレート画像を保存
4. スクリプトを実行

---

## 📝 注意事項

- **テンプレート画像は必ず自分の画面でキャプチャ**してください。異なる解像度・DPIでは認識精度が低下します。
- `threshold=0.8` は画像認識のしきい値であり、反応が悪い場合は `0.7〜0.85` の間で調整してください。
- 各関数の中で `sleep()` を挟んでいるのは、画面遷移の安定性を確保するためです。環境によっては時間を変更してください。

---

## 🏁 まとめ

このスクリプトを使えば、**マルゼンスキーなどのウマ娘をスピード特化育成でURAファイナルズを完走するルーチンを完全自動化**できます。  
イベント対応、体力管理、トラブル処理、レース進行といったすべての重要アクションに対応しているため、手動操作なしでも高確率で育成を完了できます。

---

## 👤 作者

**Arutan**  
GitHub: [https://github.com/arutan400](https://github.com/arutan400)